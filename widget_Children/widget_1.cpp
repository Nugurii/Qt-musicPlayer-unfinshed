#include "widget_Children/widget_1.h"
#include "ui_widget_1.h"

widget_1::widget_1(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::widget_1)
{
    ui->setupUi(this);
    initUi();
}

widget_1::~widget_1()
{
    delete ui;
}

void widget_1::initUi()
{
    setWindowFlags(Qt::FramelessWindowHint);
    setWindowModality(Qt::ApplicationModal);

    resize(1130, 750 - 120);
//    setMinimumSize(0, 0);
//    setMaximumSize(1920, 1030 - 120);

//    ui->pushButton->setGeometry(40, 15, 80, 30);
//    ui->pushButton->setFlat(true);
    ui->pushButton->setFont(QFont("Microsoft YaHei", 13, QFont::Normal));
//    ui->pushButton->setText("< 设置");
//    ui->pushButton->setCursor(Qt::PointingHandCursor);
    connect(ui->pushButton, &QPushButton::clicked, this, &widget_1::close);
//    ui->pushButton->setStyleSheet("QPushButton{border:0px; color:rgb(0, 0, 0, 200);}"
//                                  "QPushButton:hover{color:rgb(0, 0, 0, 255);}");  //改变透明度实现Hover效果

//    QFrame *hline = new QFrame(this);
//    hline->setGeometry(QRect(0, 60, 1277, 3));
//    hline->setFrameShape(QFrame::HLine);
//    ui->frame->setStyleSheet("QFrame{border-top:1px solid red;}");

    ui->spinBox->setRange(0, 100);
    ui->horizontalSlider->setRange(0, 100);
//    connect(ui->spinBox, SIGNAL(valueChanged(int)), ui->horizontalSlider, SLOT(setValue(int)));
//    connect(ui->horizontalSlider, SIGNAL(valueChanged(int)), ui->spinBox, SLOT(setValue(int)));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 alueChanged(int)), ui->spinBox, SLOT(setValue(int)));
    connect(ui->spinBox,
            static_cast<void(QSpinBox::*)(int)>(&QSpinBox::valueChanged),
            ui->horizontalSlider,
            &QSlider::setValue);
    connect(ui->horizontalSlider,
            static_cast<void(QSlider::*)(int)>(&QSlider::valueChanged),
            ui->spinBox,
            &QSpinBox::setValue);
    ui->spinBox->setValue(50);
//    connect(ui->pushButton, &QPushButton::clicked, this, &QApplication::quit);

    QPalette pal = palette();
    pal.setColor(QPalette::Background, QColor(250, 250, 250));
    setAutoFillBackground(true);
    setPalette(pal);
}

void widget_1::closeEvent(QCloseEvent *event)
{
    event->accept();
    emit CloseInfo();  //发送关闭通知
}

bool widget_1::eventFilter(QObject *obj, QEvent *event)
{
    Q_UNUSED(obj)
    switch(event->type()){
    case QEvent::Resize:
        ui->frame->setFixedWidth(window()->width());
        break;
    default:
        break;
    }
    return QWidget::eventFilter(obj, event);
}
